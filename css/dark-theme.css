/* ============================================
   DARK THEME â€” Premium Dark Mode
   ============================================ */

:root.dark-theme {
    /* Text */
    --color-text: #E8ECF1;
    --color-text-secondary: #94A3B8;
    --color-text-muted: #64748B;

    /* Backgrounds */
    --color-background: #0F172A;
    --color-surface: #1E293B;
    --color-card-bg: #1E293B;
    --color-border: #334155;

    /* Header/Footer */
    --color-header-bg: rgba(15, 23, 42, 0.85);
    --color-footer-bg: #0B1120;

    /* Primary */
    --color-primary: #FF6B6B;
    --color-primary-dark: #E63946;
    --color-primary-light: #FF8A8A;
    --color-primary-rgb: 255, 107, 107;

    /* Accent */
    --color-accent: #7DD3FC;
    --color-accent-rgb: 125, 211, 252;

    /* Status */
    --color-success: #34D399;
    --color-success-rgb: 52, 211, 153;
    --color-warning: #FBBF24;
    --color-warning-rgb: 251, 191, 36;
    --color-danger: #FB7185;
    --color-danger-rgb: 251, 113, 133;
    --color-info: #38BDF8;
    --color-info-rgb: 56, 189, 248;
    --color-progress: #FBBF24;
    --color-progress-rgb: 251, 191, 36;

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.2);
    --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.4), 0 8px 10px -6px rgba(0, 0, 0, 0.2);
    --shadow-xl: 0 20px 50px -12px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 0 25px rgba(255, 107, 107, 0.15);
    --color-shadow: rgba(0, 0, 0, 0.3);

    /* Glass */
    --glass-bg: rgba(30, 41, 59, 0.8);
    --glass-border: rgba(255, 255, 255, 0.05);
    --glass-blur: 20px;

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, #FF6B6B, #E63946);
    --gradient-hero: linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #0F172A 100%);
    --gradient-accent: linear-gradient(135deg, #7DD3FC, #38BDF8);
    --gradient-mesh: radial-gradient(at 20% 80%, rgba(255, 107, 107, 0.08) 0%, transparent 50%),
                     radial-gradient(at 80% 20%, rgba(125, 211, 252, 0.08) 0%, transparent 50%),
                     radial-gradient(at 50% 50%, rgba(30, 41, 59, 0.3) 0%, transparent 70%);

    /* Form elements */
    --color-disabled: #1E293B;
    --color-disabled-text: #475569;
    --color-input-bg: #0F172A;
}

/* Base overrides */
.dark-theme body {
    background-color: var(--color-background);
    color: var(--color-text);
}

/* Typography */
.dark-theme h1,
.dark-theme h2,
.dark-theme h3,
.dark-theme h4,
.dark-theme h5,
.dark-theme h6 {
    color: var(--color-text);
}

.dark-theme p {
    color: var(--color-text-secondary);
}

.dark-theme a {
    color: var(--color-primary);
}

/* Header */
.dark-theme .main-header {
    background: var(--color-header-bg);
    border-bottom-color: var(--color-border);
}

.dark-theme .logo h1 {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
}

.dark-theme .main-nav a {
    color: var(--color-text-secondary);
}

.dark-theme .main-nav a:hover,
.dark-theme .main-nav a.active {
    color: var(--color-primary);
}

/* Theme Toggle */
.dark-theme .theme-toggle {
    color: var(--color-text-secondary);
    border-color: var(--color-border);
    background: var(--color-surface);
}

.dark-theme .theme-toggle:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

/* Hero */
.dark-theme .hero {
    background: var(--gradient-hero);
}

.dark-theme .hero::before {
    background: var(--gradient-mesh);
}

.dark-theme .hero::after {
    background: linear-gradient(to top, var(--color-background), transparent);
}

.dark-theme .hero .btn-primary {
    background: var(--gradient-primary);
    color: white;
}

/* Cards */
.dark-theme .stat-card,
.dark-theme .story-card,
.dark-theme .card {
    background: var(--color-surface);
    border-color: var(--color-border);
    box-shadow: var(--shadow-md);
}

.dark-theme .stat-card:hover,
.dark-theme .story-card:hover {
    box-shadow: var(--shadow-lg);
}

.dark-theme .stat-card h3 {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
}

.dark-theme .story-image.placeholder {
    background: linear-gradient(135deg, rgba(var(--color-accent-rgb), 0.08), rgba(var(--color-primary-rgb), 0.05));
}

/* Buttons */
.dark-theme .btn-primary {
    background: var(--gradient-primary);
    color: white;
}

.dark-theme .btn-secondary {
    background: var(--gradient-accent);
    color: #0F172A;
}

.dark-theme .btn-outline {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.dark-theme .btn-outline:hover {
    background: var(--color-primary);
    color: white;
}

/* Footer */
.dark-theme footer {
    background: var(--color-footer-bg);
    border-top: 1px solid var(--color-border);
}

/* Map */
.dark-theme .map-preview {
    background: var(--color-background);
}

.dark-theme .home-map-container {
    border-color: var(--color-border);
    background-color: #1a1a2e;
}

/* Leaflet dark mode */
.dark-theme .leaflet-container {
    background-color: #1a1a2e !important;
}

.dark-theme .leaflet-tile {
    filter: brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3) brightness(0.7) !important;
}

.dark-theme .leaflet-control-attribution {
    background-color: rgba(15, 23, 42, 0.8) !important;
    color: #94A3B8 !important;
}

.dark-theme .leaflet-control-attribution a {
    color: #64748B !important;
}

.dark-theme .leaflet-control-zoom a {
    background-color: var(--color-surface) !important;
    color: var(--color-text) !important;
    border-color: var(--color-border) !important;
}

.dark-theme .leaflet-control-zoom a:hover {
    background-color: #334155 !important;
}

.dark-theme #map-container {
    background-color: #1a1a2e !important;
    border-color: var(--color-border) !important;
}

.dark-theme .leaflet-layer,
.dark-theme .leaflet-control-zoom-in,
.dark-theme .leaflet-control-zoom-out,
.dark-theme .leaflet-control-attribution {
    filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%) !important;
}

/* Map Markers */
.dark-theme .custom-marker {
    border-color: #334155;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

.dark-theme .custom-marker div {
    border-color: #334155;
}

/* Map Legend */
.dark-theme .map-legend {
    background: var(--color-surface);
    border-color: var(--color-border);
}

/* Form Elements */
.dark-theme input,
.dark-theme textarea,
.dark-theme select {
    background-color: var(--color-input-bg, #0F172A);
    color: var(--color-text);
    border: 1px solid var(--color-border);
}

.dark-theme input:focus,
.dark-theme textarea:focus,
.dark-theme select:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.15);
}

.dark-theme input::placeholder,
.dark-theme textarea::placeholder {
    color: #475569;
}

/* Mobile Menu */
.dark-theme .mobile-menu-toggle span {
    background-color: var(--color-text);
}

.dark-theme .mobile-menu-toggle.active span {
    background-color: var(--color-primary);
}

/* Mobile nav background */
@media (max-width: 768px) {
    .dark-theme .main-nav {
        background: var(--color-surface);
    }
}

/* User Menu */
.dark-theme .user-menu-toggle {
    border-color: var(--color-border);
    background: var(--color-surface);
}

.dark-theme .user-name {
    color: var(--color-text);
}

.dark-theme .user-dropdown {
    background: var(--color-surface);
    border-color: var(--color-border);
}

.dark-theme .user-dropdown li a {
    color: var(--color-text-secondary);
}

.dark-theme .user-dropdown li a:hover {
    color: var(--color-primary);
}

/* PWA Install Prompt */
.dark-theme .pwa-install-prompt {
    background: var(--color-surface);
    border-color: var(--color-border);
}

/* Disabled fields */
.dark-theme .disabled-field input,
.dark-theme .disabled-field textarea,
.dark-theme .disabled-field select {
    background-color: var(--color-disabled) !important;
    color: var(--color-disabled-text) !important;
}

/* Loading */
.dark-theme .map-loading-indicator {
    background: var(--color-surface);
    color: var(--color-text);
    box-shadow: var(--shadow-lg);
}

.dark-theme .map-loading-indicator .spinner {
    border-color: var(--color-border);
    border-top-color: var(--color-primary);
}
